@layer reset, base, layout, components, utilities;

/* Custom Properties */
:root {
    /* Accent Color Definitions */
    --orange-primary: oklch(69.8% 0.19 51.4);
    --orange-secondary: oklch(64.5% 0.173 50.5);
    --orange-glow: oklch(69.8% 0.19 51.4 / 0.2);
    --orange-input-focus-shadow: oklch(69.8% 0.19 51.4 / 0.35);
    --blue-primary: oklch(78.7% 0.173 235.3);
    --blue-secondary: oklch(69.4% 0.146 238.6);
    --blue-glow: oklch(78.7% 0.173 235.3 / 0.15);
    --blue-input-focus-shadow: oklch(78.7% 0.173 235.3 / 0.25);

    /* Aura Shadow Color Definitions - STATIC */
    --aura-orange-1: oklch(69.8% 0.19 51.4 / 0.1);
    --aura-orange-2: oklch(66.5% 0.202 39.8 / 0.07);
    --aura-blue-1: oklch(78.7% 0.173 235.3 / 0.08);
    --aura-blue-2: oklch(72.2% 0.192 247.8 / 0.06);

    /* Dark Mode (Default) */
    --bg-primary: oklch(5.9% 0.004 261.8);
    --bg-secondary: oklch(15.4% 0.009 260.5);
    --text-primary: oklch(90.2% 0.004 264.4);
    --text-secondary: oklch(65.7% 0.007 264.7);
    --border-color: oklch(27.7% 0.009 258.2);
    --input-border-color: oklch(29.8% 0.009 257.1);
    --button-text-color: oklch(100% 0 0);
    --shadow-color: oklch(0% 0 0 / 0.65);
    --input-bg: oklch(12.8% 0.009 262.1);
    --input-bg-darker: oklch(9.8% 0.008 263.9);
    --copy-button-bg: oklch(14.6% 0.006 261.6);
    --copy-button-text: var(--text-secondary);
    --copy-button-hover-text: oklch(100% 0 0);
    --corner-accent-size: 0.5rem; /* 8px */

    --accent-primary: var(--orange-primary);
    --accent-secondary: var(--orange-secondary);
    --accent-glow: var(--orange-glow);
    --input-focus-shadow: var(--orange-input-focus-shadow);
    --copy-button-hover-bg: var(--orange-secondary);

    --current-aura-1: var(--aura-orange-1);
    --current-aura-2: var(--aura-orange-2);
}

@layer reset {
    /* Modern CSS Reset */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    html {
        -moz-text-size-adjust: none;
        -webkit-text-size-adjust: none;
        text-size-adjust: none;
    }

    body {
        min-height: 100vh;
        line-height: 1.5;
        text-rendering: optimizeSpeed;
    }

    img, picture, svg {
        display: block;
        max-width: 100%;
    }

    input, button, textarea, select {
        font: inherit;
    }

    h1, h2, h3, h4, h5, h6 {
        overflow-wrap: break-word;
    }

    /* Remove animations for people who've turned them off */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
    }
}

@layer base {
    body {
        font-family: 'Inter', sans-serif;
        color: var(--text-primary);
        background-color: var(--bg-primary);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-block-size: 100vh;
        padding-block: 1.25rem; /* 20px */
        padding-inline: 1.25rem; /* 20px */
        overflow: hidden;
        transition: background-color 0.4s ease, color 0.4s ease;

        &.light-mode {
            --bg-primary: oklch(93.4% 0.004 259.7);
            --bg-secondary: oklch(100% 0 0);
            --text-primary: oklch(13.4% 0.004 263.3);
            --text-secondary: oklch(40.6% 0.006 263.6);
            --border-color: oklch(91.1% 0.004 260.1);
            --input-border-color: oklch(85.9% 0.005 257.6);
            --button-text-color: oklch(100% 0 0);
            --shadow-color: oklch(0% 0 0 / 0.18);
            --input-bg: oklch(98.9% 0.001 266.5);
            --input-bg-darker: oklch(96.7% 0.002 262.2);
            --copy-button-bg: oklch(91.8% 0.003 264.2);
            --copy-button-text: var(--text-secondary);
            --copy-button-hover-text: oklch(100% 0 0);

            --accent-primary: var(--blue-primary);
            --accent-secondary: var(--blue-secondary);
            --accent-glow: var(--blue-glow);
            --input-focus-shadow: var(--blue-input-focus-shadow);
            --copy-button-hover-bg: var(--blue-secondary);

            --current-aura-1: var(--aura-blue-1);
            --current-aura-2: var(--aura-blue-2);

            & .icon-moon {
                display: block;
            }
        }

        &:not(.light-mode) .icon-sun {
            display: block;
        }
    }

    .icon-sun,
    .icon-moon {
        display: none;
    }
}

@layer layout {
    .container {
        inline-size: 100%;
        max-inline-size: 36.25rem; /* 580px */
        text-align: center;
        padding-block: 2.1875rem; /* 35px */
        padding-inline: 2.5rem; /* 40px */
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 0.625rem; /* 10px */
        box-shadow:
            0 0 1.25rem 0.4375rem var(--current-aura-1), /* 20px 7px */
            0 0 2.5rem 0.75rem var(--current-aura-2), /* 40px 12px */
            0 0 1.5625rem var(--accent-glow), /* 25px */
            0 0.625rem 1.875rem var(--shadow-color); /* 10px 30px */
        transition: background-color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease;
        position: relative;
        transform-origin: center;
        opacity: 0;
        animation: crtPowerOn 1.3s cubic-bezier(0.23, 1, 0.32, 1) 0.2s forwards;
        contain: layout paint;

        &::before,
        &::after {
            content: '';
            position: absolute;
            inline-size: var(--corner-accent-size);
            block-size: var(--corner-accent-size);
            border-color: var(--accent-primary);
            border-style: solid;
            transition: border-color 0.4s ease;
        }

        &::before {
            inset-block-start: -1px;
            inset-inline-start: -1px;
            border-block-start-width: 2px;
            border-inline-start-width: 2px;
            border-block-end-width: 0;
            border-inline-end-width: 0;
            border-start-start-radius: 0.625rem; /* 10px */
        }

        &::after {
            inset-block-end: -1px;
            inset-inline-end: -1px;
            border-block-start-width: 0;
            border-inline-start-width: 0;
            border-block-end-width: 2px;
            border-inline-end-width: 2px;
            border-end-end-radius: 0.625rem; /* 10px */
        }
    }

    .title-group {
        margin-block-end: 2.5rem; /* 40px */
    }

    .theme-toggle-button {
        position: fixed;
        inset-block-start: 1.25rem; /* 20px */
        inset-inline-end: 1.25rem; /* 20px */
        background-color: transparent;
        color: var(--text-secondary);
        border: none;
        border-radius: 50%;
        inline-size: 2.5rem; /* 40px */
        block-size: 2.5rem; /* 40px */
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 1000;
        transition: color 0.3s ease, background-color 0.3s ease;

        &:hover {
            color: var(--accent-primary);
            background-color: var(--accent-glow);
        }

        & svg {
            inline-size: 1.25rem; /* 20px */
            block-size: 1.25rem; /* 20px */
            fill: currentColor;
        }
    }
}

@layer components {
    .title {
        font-family: 'Inter', sans-serif;
        font-size: 2.5rem;
        font-weight: 800;
        letter-spacing: -0.0625rem; /* -1px */
        color: var(--text-primary);
        margin-block-end: 0.625rem; /* 10px */
        text-transform: uppercase;
        contain: layout;

        & .highlight {
            color: var(--accent-primary);
            text-shadow: 0 0 0.625rem var(--accent-primary); /* 10px */
            transition: color 0.4s ease, text-shadow 0.4s ease;
        }
    }

    .subtitle {
        font-family: 'Roboto Mono', monospace;
        font-size: 0.95rem;
        font-style: italic;
        color: var(--text-secondary);
        line-height: 1.6;

        &::before {
            content: "ai_subroutine//: ";
            opacity: 0.7;
        }
    }

    .shortener-form {
        display: flex;
        flex-direction: column;
        gap: 1.5625rem; /* 25px */
        contain: content;
    }

    .input-group {
        position: relative;
        contain: layout;

        &::before,
        &::after {
            content: '';
            position: absolute;
            inline-size: 0.75rem; /* 12px */
            block-size: 0.75rem; /* 12px */
            border-color: var(--input-border-color);
            border-style: solid;
            opacity: 0.6;
            transition: border-color 0.3s ease, opacity 0.3s ease;
            pointer-events: none;
        }

        &::before {
            inset-block-start: 0.5rem; /* 8px */
            inset-inline-start: 0.5rem; /* 8px */
            border-block-start-width: 1.5px;
            border-inline-start-width: 1.5px;
            border-block-end-width: 0;
            border-inline-end-width: 0;
        }

        &::after {
            inset-block-end: 0.5rem; /* 8px */
            inset-inline-end: 0.5rem; /* 8px */
            border-block-start-width: 0;
            border-inline-start-width: 0;
            border-block-end-width: 1.5px;
            border-inline-end-width: 1.5px;
        }
    }

    .url-input {
        inline-size: 100%;
        padding-block: 1.125rem; /* 18px */
        padding-inline: 1.5625rem; /* 25px */
        font-size: 1rem;
        font-family: 'Roboto Mono', monospace;
        color: var(--text-primary);
        background: linear-gradient(180deg, var(--input-bg-darker), var(--input-bg));
        border: 1.5px solid var(--input-border-color);
        border-radius: 0.375rem; /* 6px */
        outline: none;
        transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.4s ease, color 0.4s ease;
        position: relative;
        z-index: 1;
        box-shadow: inset 0 0.0625rem 0.1875rem oklch(0% 0 0 / 0.4); /* 1px 3px */

        &::placeholder {
            color: var(--text-secondary);
            opacity: 0.5;
            font-style: italic;
        }

        &:focus {
            border-color: var(--accent-primary);
            background: linear-gradient(180deg, var(--input-bg), var(--input-bg-darker));
            box-shadow: inset 0 0.0625rem 0.125rem oklch(0% 0 0 / 0.5), 0 0 0 0.125rem var(--accent-primary), 0 0 0.75rem var(--accent-glow); /* 1px 2px, 2px, 12px */
        }

        &:focus ~ .input-focus-line {
            inline-size: calc(100% + 0.1875rem); /* 3px */
            inset-inline-start: -1.5px;
        }
    }

    .input-focus-line {
        position: absolute;
        inset-inline-start: 50%;
        inset-block-end: -1.5px;
        inline-size: 0;
        block-size: 2px;
        background-color: var(--accent-primary);
        transition: inline-size 0.3s ease 0.1s, inset-inline-start 0.3s ease 0.1s, background-color 0.4s ease;
        border-radius: 0.0625rem; /* 1px */
        z-index: 2;
    }

    .shrink-button {
        inline-size: 100%;
        padding-block: 1.125rem; /* 18px */
        padding-inline: 1.5625rem; /* 25px */
        font-size: 1.05rem;
        font-weight: 700;
        font-family: 'Inter', sans-serif;
        color: var(--button-text-color);
        background: linear-gradient(45deg, var(--accent-secondary), var(--accent-primary));
        border: 1px solid var(--accent-primary);
        border-radius: 0.375rem; /* 6px */
        cursor: pointer;
        transition: transform 0.2s ease-out, box-shadow 0.25s ease-out, background 0.25s ease-out, border-color 0.25s ease-out;
        text-transform: uppercase;
        letter-spacing: 0.0625rem; /* 1px */
        box-shadow: 0 0 0.9375rem var(--accent-glow); /* 15px */
        position: relative;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            inset-block-start: 0;
            inset-inline-start: -100%;
            inline-size: 100%;
            block-size: 100%;
            background: linear-gradient(90deg, transparent, oklch(100% 0 0 / 0.25), transparent);
            transition: inset-inline-start 0.25s ease-out;
        }

        &:hover {
            box-shadow: 0 0 1.5625rem 0.3125rem var(--accent-primary); /* 25px 5px */
            transform: translateY(-0.125rem); /* -2px */

            &::before {
                inset-inline-start: 100%;
            }
        }

        &:active {
            transform: translateY(0px) scale(0.98);
            box-shadow: 0 0 0.625rem var(--accent-glow); /* 10px */
        }
    }

    .result-area {
        max-block-size: 0;
        opacity: 0;
        overflow: hidden;
        padding-block-start: 0;
        padding-block-end: 0;
        margin-block-start: 0;
        border-width: 0px;
        border-inline-start-width: 0px;
        background-color: var(--input-bg);
        border-color: var(--border-color);
        border-style: solid;
        border-radius: 0.375rem; /* 6px */
        text-align: start;
        transition: max-block-size 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.4s ease-in-out 0.1s, padding-block-start 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), padding-block-end 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), margin-block-start 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-width 0.4s ease-in-out, border-inline-start-width 0.4s ease-in-out 0.2s, background-color 0.4s ease, border-color 0.4s ease;
        contain: layout paint;

        &.visible {
            max-block-size: 25rem; /* 400px */
            opacity: 1;
            padding-block-start: 1.5625rem; /* 25px */
            padding-block-end: 1.5625rem; /* 25px */
            margin-block-start: 2.1875rem; /* 35px */
            border-width: 1px;
            border-inline-start-width: 3px;
            border-inline-start-color: var(--accent-primary);
        }

        & p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-block-end: 0.75rem; /* 12px */
            font-family: 'Roboto Mono', monospace;
            text-transform: uppercase;
            font-style: italic;
            padding-inline-start: 0.625rem; /* 10px */

            &::before {
                content: ">> AI_Generated_Vector: ";
            }
        }
    }

    .shortened-url-container {
        display: flex;
        align-items: center;
        gap: 0.75rem; /* 12px */
        background-color: var(--bg-secondary);
        padding-block: 0.9375rem; /* 15px */
        padding-inline: 1.125rem; /* 18px */
        border-radius: 0.25rem; /* 4px */
        border: 1px solid var(--border-color);
        transition: background-color 0.4s ease, border-color 0.4s ease;
        margin-inline-start: 0.625rem; /* 10px */
        contain: content;
    }

    .shortened-url-display {
        flex-grow: 1;
        font-size: 1.15rem;
        font-family: 'Roboto Mono', monospace;
        font-weight: 700;
        color: var(--accent-primary);
        word-break: break-all;
        cursor: default;
        text-shadow: 0 0 0.3125rem var(--accent-glow); /* 5px */
        transition: color 0.4s ease, text-shadow 0.4s ease;
        min-block-size: 1.2em;
        contain: layout;

        &.typing::after {
            content: '_';
            display: inline-block;
            animation: blink-caret 0.8s step-end infinite;
            color: var(--accent-primary);
            margin-inline-start: 0.1875rem; /* 3px */
            font-weight: bold;
            position: relative;
            inset-block-start: -1px;
        }
    }

    .copy-button {
        padding-block: 0.5625rem; /* 9px */
        padding-inline: 0.875rem; /* 14px */
        font-size: 0.8rem;
        font-family: 'Roboto Mono', monospace;
        text-transform: uppercase;
        color: var(--copy-button-text);
        background-color: var(--copy-button-bg);
        border: 1px solid var(--border-color);
        border-radius: 0.25rem; /* 4px */
        cursor: pointer;
        transition: all 0.2s ease;
        contain: layout paint;

        &:hover {
            background-color: var(--copy-button-hover-bg);
            color: var(--copy-button-hover-text);
            border-color: var(--accent-secondary);
            transform: scale(1.05);
        }
    }

    .copy-feedback {
        display: block;
        margin-block-start: 0.625rem; /* 10px */
        font-size: 0.85rem;
        font-family: 'Roboto Mono', monospace;
        color: var(--accent-primary);
        opacity: 0;
        block-size: 1.2em;
        transition: opacity 0.3s ease, color 0.4s ease;
        text-transform: lowercase;
        padding-inline-start: 0.625rem; /* 10px */

        &::before {
            content: "vector_status: ";
        }
    }
}

@layer utilities {
    .theme-toggle-button,
    .title-group,
    .shortener-form,
    .result-area {
        opacity: 0;
        animation: fadeInContent 0.5s ease-out 1.3s forwards;
    }

    @keyframes crtPowerOn {
        0% {
            transform: scaleX(0.02) scaleY(0.01);
            opacity: 0;
            filter: brightness(4) saturate(3) blur(0.1875rem); /* 3px */
        }

        20% {
            transform: scaleX(1) scaleY(0.01);
            opacity: 1;
            filter: brightness(2.5) saturate(1.5) blur(0.0625rem); /* 1px */
        }

        40% {
            transform: scaleX(1) scaleY(0.01);
            opacity: 1;
            filter: brightness(2) saturate(1.5) blur(0.03125rem); /* 0.5px */
        }

        85% {
            transform: scaleX(1.01) scaleY(1.01);
            opacity: 1;
            filter: brightness(1) saturate(1) blur(0);
        }

        100% {
            transform: scale(1);
            opacity: 1;
            filter: none;
        }
    }

    @keyframes fadeInContent {
        to {
            opacity: 1;
        }
    }

    @keyframes blink-caret {
        from,
        to {
            opacity: 1;
        }

        50% {
            opacity: 0;
        }
    }
}

/* Media Queries */
@media (max-width: 600px) {
    body {
        overflow: auto;
    }

    .container {
        padding-block: 1.5625rem; /* 25px */
        padding-inline: 1.5625rem; /* 25px */
        margin-inline: 0.9375rem; /* 15px */
        margin-block-start: 1.25rem; /* 20px */
        animation: crtPowerOn 1.1s cubic-bezier(0.23, 1, 0.32, 1) 0.1s forwards;
    }

    .theme-toggle-button,
    .title-group,
    .shortener-form,
    .result-area {
        animation-delay: 1.1s;
    }

    .theme-toggle-button {
        inset-block-start: 0.9375rem; /* 15px */
        inset-inline-end: 0.9375rem; /* 15px */
    }

    .title {
        font-size: 2rem;
    }

    .subtitle {
        font-size: 0.85rem;
    }

    .url-input,
    .shrink-button {
        padding-block: 1rem; /* 16px */
        padding-inline: 1.25rem; /* 20px */
        font-size: 0.95rem;
    }

    .shortened-url-display {
        font-size: 1.05rem;
    }

    .result-area {
        &.visible {
            padding-block-start: 1.25rem; /* 20px */
            padding-block-end: 1.25rem; /* 20px */
        }
    }
}